# message-persistence-service
Crude Work in Progress!

## Dependencies
Go
docker
docker-compose

## Usage
### Build
Just enter the project directory and type

    ./docker-build.sh

### Run
Just enter the project directory and type

    docker-compose up

The service is now running on port `2021`
ES is running on port `9200`
### Writing

#### Persist a message
    curl -X POST -d '{"user":"dino", "message":"Hallo"}' localhost:2021/someorga/somerepo
#### Update a message
The id is required. (Its the id autogenerated by elasticsearch, get it by querying ES)

    curl -X UPDATE -d '{"id":"blablastuff", "user":"dino", "message":"Hallo"}' localhost:2021/someorga/somerepo

#### Delete a message
The id is required.

    curl -X UPDATE -d '{"id":"blablastuff"}' localhost:2021/someorga/somerepo


### Reading
As of right now only write operations are supported.
So to read and search stuff just use the REST-Api of elasticsearch
#### Search example
    curl "http://localhost:9200/messages/message/_search"
You can install `jq` and pipe through it if you want to pretty print the json output
